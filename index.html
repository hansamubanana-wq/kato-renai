<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãƒ»ãƒ©ãƒ–ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ ã€œé’ç¨œä¸­å­¦æ ¡ã®æ‹ã€œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #ec407a 0%, #f48fb1 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
        }

        #game-container {
            width: 100%;
            max-width: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ */
        #title-screen {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(180deg, #fce4ec 0%, #f8bbd0 100%);
        }

        #title-screen h1 {
            font-size: 26px;
            color: #c2185b;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        #title-screen h2 {
            font-size: 18px;
            color: #ec407a;
            margin-bottom: 30px;
        }

        .valentine-box {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 3px dashed #ec407a;
        }

        .valentine-box p {
            font-size: 14px;
            color: #666;
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .valentine-box .date {
            font-weight: bold;
            color: #ec407a;
            font-size: 16px;
            margin-bottom: 15px;
        }

        /* åå‰å…¥åŠ› */
        #name-input-screen {
            display: none;
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(180deg, #fce4ec 0%, #f8bbd0 100%);
        }

        #name-input-screen h2 {
            font-size: 22px;
            color: #c2185b;
            margin-bottom: 20px;
        }

        #name-input-screen input {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ec407a;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .start-button {
            background: linear-gradient(135deg, #ec407a, #d81b60);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(236, 64, 122, 0.4);
        }

        .start-button:active {
            transform: scale(0.95);
        }

        /* ã‚²ãƒ¼ãƒ ç”»é¢ */
        #game-screen {
            display: none;
        }

        .game-header {
            background: linear-gradient(135deg, #ec407a, #f48fb1);
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            animation: valentine-glow 2s infinite;
        }

        @keyframes valentine-glow {
            0%, 100% { box-shadow: 0 0 10px rgba(236, 64, 122, 0.5); }
            50% { box-shadow: 0 0 20px rgba(236, 64, 122, 0.8); }
        }

        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ */
        #status-bar {
            background: white;
            padding: 15px;
            border-bottom: 2px solid #e0e0e0;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat {
            flex: 1;
            min-width: 100px;
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #ec407a;
        }

        .stat-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ec407a, #f48fb1);
            transition: width 0.5s;
        }

        #items {
            display: flex;
            gap: 5px;
            margin-top: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .item {
            padding: 5px 10px;
            background: #fce4ec;
            border: 1px solid #ec407a;
            border-radius: 5px;
            font-size: 12px;
        }

        /* ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ */
        #text-window {
            min-height: 280px;
            padding: 30px 20px;
            background: repeating-linear-gradient(
                45deg,
                #fce4ec,
                #fce4ec 30px,
                #f8bbd0 30px,
                #f8bbd0 31px
            );
            position: relative;
            overflow: hidden;
        }

        .character-portrait {
            text-align: center;
            font-size: 80px;
            margin: 10px 0;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #text-content {
            font-size: 16px;
            line-height: 1.8;
            color: #212121;
            position: relative;
            z-index: 2;
        }

        .character-name {
            font-weight: bold;
            color: #ec407a;
            margin-bottom: 10px;
            display: block;
        }

        .character-name.player {
            color: #1976d2;
        }

        .inner-thought {
            font-style: italic;
            color: #999;
            font-size: 14px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 5px;
        }

        #effects {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .effect-symbol {
            position: absolute;
            font-size: 24px;
            animation: float 3s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-30px) rotate(180deg); opacity: 0.6; }
        }

        /* é¸æŠè‚¢ */
        #choices {
            padding: 20px;
            background: white;
        }

        .choice-button {
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            background: white;
            border: 2px solid #ec407a;
            border-radius: 10px;
            font-size: 15px;
            color: #c2185b;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            line-height: 1.5;
        }

        .choice-button:hover {
            background: #fce4ec;
            transform: translateX(5px);
        }

        .choice-button:active {
            transform: scale(0.98);
        }

        .continue-button {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: linear-gradient(135deg, #ec407a, #f48fb1);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        /* ãƒŸãƒ‹ã‚²ãƒ¼ãƒ  */
        #quiz-game {
            display: none;
            padding: 20px;
            background: white;
        }

        .quiz-question {
            font-size: 18px;
            color: #c2185b;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .quiz-option {
            width: 100%;
            padding: 12px;
            margin-bottom: 8px;
            background: white;
            border: 2px solid #ec407a;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background: #fce4ec;
        }

        /* ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚° */
        #ending-screen {
            display: none;
            padding: 40px 20px;
            text-align: center;
            min-height: 400px;
        }

        #ending-screen.true-end {
            background: linear-gradient(180deg, #fff9c4 0%, #fff59d 50%, #fce4ec 100%);
        }

        #ending-screen.good-end {
            background: linear-gradient(180deg, #fce4ec 0%, #f8bbd0 100%);
        }

        #ending-screen.normal-end {
            background: linear-gradient(180deg, #e3f2fd 0%, #90caf9 100%);
        }

        #ending-screen.bad-end {
            background: linear-gradient(180deg, #cfd8dc 0%, #b0bec5 100%);
        }

        #ending-screen h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        #ending-screen p {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .restart-button {
            background: linear-gradient(135deg, #ec407a, #d81b60);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 20px;
        }

        /* é€šçŸ¥ */
        #notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(236, 64, 122, 0.95);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 14px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        @media (max-width: 400px) {
            #title-screen h1 {
                font-size: 22px;
            }
            
            #text-content {
                font-size: 14px;
            }
            
            .choice-button {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div id="notification"></div>
    
    <div id="game-container">
        <!-- ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ -->
        <div id="title-screen">
            <h1>ğŸ’ ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãƒ»ãƒ©ãƒ–ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ ğŸ’</h1>
            <h2>ã€œé’ç¨œä¸­å­¦æ ¡ã®æ‹ã€œ</h2>
            
            <div class="valentine-box">
                <div class="date">ğŸ“… 2æœˆ14æ—¥ ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãƒ‡ãƒ¼</div>
                <p>
                    ã‚ãªãŸã¯é’ç¨œä¸­å­¦æ ¡3å¹´ç”Ÿã€‚<br>
                    æ‹…ä»»ã§ã‚ã‚Šã€ç¾ä»£å›½èªã‚’æ•™ãˆã‚‹<br>
                    åŒ—äº•ãªã¿å…ˆç”Ÿã«å¯†ã‹ã«æ‹ã‚’ã—ã¦ã„ã‚‹...
                </p>
                <p style="font-weight: bold; color: #ec407a;">
                    ä»Šæ—¥ã€å‹‡æ°—ã‚’å‡ºã—ã¦ãƒãƒ§ã‚³ã‚’æ¸¡ãã†ã¨æ±ºæ„ã—ãŸã€‚
                </p>
            </div>
            
            <button class="start-button" onclick="showNameInput()">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        </div>

        <!-- åå‰å…¥åŠ›ç”»é¢ -->
        <div id="name-input-screen">
            <h2>ğŸ’• ã‚ãªãŸã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ ğŸ’•</h2>
            <div class="valentine-box">
                <p>é’ç¨œä¸­å­¦æ ¡3å¹´Açµ„ã®ç”Ÿå¾’ã¨ã—ã¦ã€<br>
                ãªã¿å…ˆç”Ÿã¨ã®ç”˜é…¸ã£ã±ã„ä¸€æ—¥ãŒå§‹ã¾ã‚Šã¾ã™ã€‚</p>
            </div>
            <input type="text" id="player-name-input" placeholder="ä¾‹ï¼šå±±ç”°å¤ªéƒ" maxlength="10">
            <br>
            <button class="start-button" onclick="startGame()">æ‹ã®å†’é™ºã‚’å§‹ã‚ã‚‹</button>
        </div>

        <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
        <div id="game-screen">
            <div id="game-header" class="game-header">ğŸ’ 2æœˆ14æ—¥ ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãƒ‡ãƒ¼ ğŸ’</div>
            
            <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ -->
            <div id="status-bar">
                <div class="stat">
                    <div class="stat-label">ãªã¿å…ˆç”Ÿâ™¡å¥½æ„Ÿåº¦</div>
                    <div class="stat-value" id="affection-value">50</div>
                    <div class="stat-bar">
                        <div class="stat-bar-fill" id="affection-bar" style="width: 50%"></div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">å‹‡æ°—</div>
                    <div class="stat-value" id="courage-value">100</div>
                    <div class="stat-bar">
                        <div class="stat-bar-fill" id="courage-bar" style="width: 100%"></div>
                    </div>
                </div>
                <div id="items"></div>
            </div>
            
            <div id="text-window">
                <div id="effects"></div>
                <div id="character-portrait" class="character-portrait"></div>
                <div id="text-content"></div>
            </div>

            <div id="choices"></div>
            
            <!-- ã‚¯ã‚¤ã‚ºãƒŸãƒ‹ã‚²ãƒ¼ãƒ  -->
            <div id="quiz-game"></div>
        </div>

        <!-- ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
        <div id="ending-screen"></div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        const gameState = {
            playerName: '',
            affection: 50,
            courage: 100,
            items: [],
            hasChocolate: false,
            quizScore: 0,
            sceneIndex: 0
        };

        // å…¨ã‚·ãƒŠãƒªã‚ª
        const allScenarios = [
            // === Phase 1: æœã®HRå‰ ===
            {
                text: "æœã€7æ™‚50åˆ†ã€‚é’ç¨œä¸­å­¦æ ¡3å¹´Açµ„ã®æ•™å®¤ã€‚",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"
            },
            {
                text: "ï¼ˆé„ã®ä¸­ã®ãƒãƒ§ã‚³ã‚’ç¢ºèªã™ã‚‹ï¼‰...ã‚ˆã—ã€ã¡ã‚ƒã‚“ã¨ã‚ã‚‹ã€‚ä»Šæ—¥ã“ãã€ãªã¿å…ˆç”Ÿã«æ¸¡ã™ã‚“ã ï¼",
                speaker: "player",
                thought: "ï¼ˆãƒ‰ã‚­ãƒ‰ã‚­ã™ã‚‹...ã§ã‚‚ã€é ‘å¼µã‚‰ãªã„ã¨ï¼ï¼‰",
                portrait: "ğŸ˜³",
                effect: "chocolate"
            },
            {
                text: "ãŠã„ã€ãŠã¯ã‚ˆã†ï¼",
                speaker: "å‹äººA",
                portrait: "ğŸ‘¦"
            },
            {
                text: "ã‚ã€ãŠã¯ã‚ˆã†ã€‚",
                speaker: "player",
                portrait: "ğŸ˜Š"
            },
            {
                text: "ãŠå‰ã€ä»Šæ—¥èª°ã‹ã«ãƒãƒ§ã‚³æ¸¡ã™ã®ï¼Ÿé„ã€ã‚„ã‘ã«å¤§äº‹ãã†ã«æŒã£ã¦ã‚‹ã˜ã‚ƒã‚“ã€‚",
                speaker: "å‹äººB",
                portrait: "ğŸ‘¦"
            },
            {
                text: "ãã‚Œã¯...ã¾ã‚ã€ãªã€‚",
                speaker: "player",
                choices: [
                    { text: "Aï¼šã€Œå®Ÿã¯ãªã¿å…ˆç”Ÿã«æ¸¡ãã†ã¨æ€ã£ã¦ã‚‹ã€ï¼ˆæ­£ç›´ã«è©±ã™ï¼‰", affection: 0, courage: -5 },
                    { text: "Bï¼šã€Œå†…ç·’ï¼æ•™ãˆãªã„ï¼ã€ï¼ˆã¯ãã‚‰ã‹ã™ï¼‰", affection: 0, courage: 0 },
                    { text: "Cï¼šã€Œå¥½ããªäººãŒã„ã‚‹ã‚“ã ã‚ˆ...ã€ï¼ˆç…§ã‚ŒãªãŒã‚‰ï¼‰", affection: 0, courage: -3 }
                ]
            },
            {
                text: "ã¾ã˜ã‹ã‚ˆï¼ãªã¿å…ˆç”Ÿã£ã¦...å…ˆç”Ÿã ãï¼Ÿ",
                speaker: "å‹äººA",
                portrait: "ğŸ˜²"
            },
            {
                text: "ã‚ã‹ã£ã¦ã‚‹ã‚ˆã€‚ã§ã‚‚ã€æ°—æŒã¡ã¯ä¼ãˆãŸã„ã€‚",
                speaker: "player",
                portrait: "ğŸ˜Š"
            },
            {
                text: "å‹‡æ°—ã‚ã‚‹ãª...ï¼é ‘å¼µã‚Œã‚ˆï¼",
                speaker: "å‹äººB",
                portrait: "ğŸ‘¦"
            },
            
            // === Phase 2: ãªã¿å…ˆç”Ÿç™»å ´ ===
            {
                text: "ãã®æ™‚ã€æ•™å®¤ã®ãƒ‰ã‚¢ãŒé–‹ã„ãŸã€‚",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"
            },
            {
                text: "ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€œï¼ã¿ã‚“ãªå…ƒæ°—ï¼Ÿ",
                speaker: "ãªã¿",
                thought: "ï¼ˆä»Šæ—¥ã¯ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ã‹...èª°ã‹ãã‚Œã‚‹ã‹ãªï¼Ÿãˆã¸ã¸ï¼‰",
                portrait: "ğŸ°",
                effect: "heart"
            },
            {
                text: "ï¼ˆå¿ƒè‡“ãŒé«˜é³´ã‚‹ï¼‰",
                speaker: "player",
                thought: "ï¼ˆå¯æ„›ã„...ä»Šæ—¥çµ¶å¯¾æ¸¡ã™...ï¼ï¼‰",
                portrait: "ğŸ˜³"
            },
            {
                text: "ä»Šæ—¥ã¯ç‰¹åˆ¥ãªæ—¥ã§ã™ã­â™ª ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãƒ‡ãƒ¼ï¼ã¿ã‚“ãªã€èª°ã‹ã«æƒ³ã„ã‚’ä¼ãˆã‚‹ã®ã‹ãªï¼Ÿ",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š"
            },
            {
                text: "ï¼ˆã‚¯ãƒ©ã‚¹ãŒã–ã‚ã¤ãï¼‰",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"
            },
            {
                text: "ãã‚Œã§ã¯ã€æœã®HRã‚’å§‹ã‚ã¾ã™ã€‚ä»Šæ—¥ã®äºˆå®šã§ã™ãŒ...",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š"
            },
            
            // === Phase 3: 1æ™‚é–“ç›®ãƒ»å›½èªã®æˆæ¥­ ===
            {
                text: "1æ™‚é–“ç›®ã€ç¾ä»£å›½èªã®æˆæ¥­ã€‚ãªã¿å…ˆç”Ÿã®æˆæ¥­ãŒå§‹ã¾ã£ãŸã€‚",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"
            },
            {
                text: "ãã‚Œã§ã¯ã€æ•™ç§‘æ›¸ã®42ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚ä»Šæ—¥ã¯ã€èµ°ã‚Œãƒ¡ãƒ­ã‚¹ã€ã‚’èª­ã¿ã¾ã™ã€‚",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š"
            },
            {
                text: "ï¼ˆãªã¿å…ˆç”Ÿã®ã“ã¨ã°ã‹ã‚Šè€ƒãˆã¦ã€å…¨ç„¶é›†ä¸­ã§ããªã„...ï¼‰",
                speaker: "player",
                thought: "ï¼ˆãƒãƒ§ã‚³ã€ã„ã¤æ¸¡ãã†...ï¼‰",
                portrait: "ğŸ˜³"
            },
            {
                text: "playerãã‚“ã€æ¬¡ã®æ®µè½ã‚’èª­ã‚“ã§ãã‚Œã‚‹ï¼Ÿ",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š",
                dynamicName: true
            },
            {
                text: "ã¯ã€ã¯ã„ï¼",
                speaker: "player",
                choices: [
                    { text: "Aï¼šã‚¹ãƒ©ã‚¹ãƒ©ã¨èª­ã‚€ï¼ˆé ‘å¼µã£ã¦é›†ä¸­ï¼‰", affection: 8, courage: -5 },
                    { text: "Bï¼šç·Šå¼µã—ã¦ä½•åº¦ã‚‚å™›ã‚€", affection: 5, courage: -3 },
                    { text: "Cï¼šå…ˆç”Ÿã‚’è¦‹ã¤ã‚ãªãŒã‚‰èª­ã‚€ï¼ˆãƒ‰ã‚­ãƒ‰ã‚­ï¼‰", affection: 6, courage: -5 }
                ]
            },
            {
                text: "ã‚ã‚ŠãŒã¨ã†ï¼ã¨ã¦ã‚‚è‰¯ã‹ã£ãŸã‚ˆâ™ª",
                speaker: "ãªã¿",
                thought: "ï¼ˆä»Šæ—¥ã‚‚é ‘å¼µã£ã¦ã‚‹ãª...ï¼‰",
                portrait: "ğŸ˜Š",
                showAffection: true
            },
            {
                text: "ãã‚Œã§ã¯ã€ãƒ¡ãƒ­ã‚¹ã®è¡Œå‹•ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãƒ¡ãƒ­ã‚¹ã¯è¦ªå‹ã‚’æ•‘ã†ãŸã‚ã«èµ°ã‚Šã¾ã—ãŸã€‚",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š"
            },
            {
                text: "ã¿ãªã•ã‚“ã¯ã€å¤§åˆ‡ãªäººã®ãŸã‚ã«ä½•ã‹ã‚’çŠ ç‰²ã«ã§ãã¾ã™ã‹ï¼Ÿ",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š"
            },
            {
                text: "ï¼ˆå…ˆç”Ÿã‚’è¦‹ã¤ã‚ã‚‹ï¼‰",
                speaker: "player",
                thought: "ï¼ˆä¿ºã¯...ãªã¿å…ˆç”Ÿã®ãŸã‚ãªã‚‰...ï¼‰",
                portrait: "ğŸ˜³",
                effect: "heart"
            },
            
            // === Phase 4: ã‚¯ã‚¤ã‚ºãƒŸãƒ‹ã‚²ãƒ¼ãƒ  ===
            {
                text: "ãã‚Œã§ã¯ã€ç†è§£åº¦ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¾ã™ï¼",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š",
                quiz: true
            },
            
            // === Phase 5: æˆæ¥­çµ‚äº†ãƒ»ãƒãƒ§ã‚³æ¸¡ã—ã‚¤ãƒ™ãƒ³ãƒˆ ===
            {
                text: "ãƒãƒ£ã‚¤ãƒ ãŒé³´ã£ãŸã€‚æˆæ¥­ãŒçµ‚ã‚ã£ãŸã€‚",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"
            },
            {
                text: "ã¯ã„ã€ãã‚Œã§ã¯ã“ã“ã¾ã§ã€œï¼ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š"
            },
            {
                text: "ï¼ˆæ•™å®¤ãŒã–ã‚ã¤ãå§‹ã‚ã‚‹ï¼‰",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                effect: "chocolate"
            },
            {
                text: "ä»Šã ...ï¼ãƒãƒ§ã‚³ã‚’æ¸¡ã™ãªã‚‰ã€ä»Šã—ã‹ãªã„...ï¼",
                speaker: "player",
                thought: "ï¼ˆç·Šå¼µã™ã‚‹...ã§ã‚‚ã€è¡Œãã‚“ã ï¼ï¼‰",
                portrait: "ğŸ˜³",
                courage: -10
            },
            {
                text: "ï¼ˆç«‹ã¡ä¸ŠãŒã‚Šã€æ•™å£‡ã«å‘ã‹ã†ï¼‰",
                speaker: "player",
                portrait: "ğŸš¶"
            },
            {
                text: "ã‚ã‚Œã€ã©ã†ã—ãŸã®ï¼Ÿè³ªå•ã‹ãªï¼Ÿ",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š"
            },
            {
                text: "ã‚ã€ã‚ã®...å…ˆç”Ÿ...ï¼",
                speaker: "player",
                portrait: "ğŸ˜³",
                choices: [
                    { text: "Aï¼šã€Œã“ã‚Œ...å—ã‘å–ã£ã¦ãã ã•ã„ï¼ã€ï¼ˆãƒãƒ§ã‚³ã‚’å·®ã—å‡ºã™ï¼‰", affection: 15, courage: -10, giveChocolate: true },
                    { text: "Bï¼šã€Œã‚ã€ã‚„ã£ã±ã‚Šãªã‚“ã§ã‚‚ãªã„ã§ã™...ã€ï¼ˆå¼•ã£è¾¼ã‚€ï¼‰", affection: 0, courage: -20, retreat: true },
                    { text: "Cï¼šã€Œå…ˆç”Ÿã€å¥½ãã§ã™ï¼ã“ã‚Œï¼ã€ï¼ˆå¤§å£°ã§ï¼‰", affection: 12, courage: -15, giveChocolate: true, bold: true }
                ]
            },
            
            // === Phase 6: ãƒãƒ§ã‚³å—ã‘å–ã‚Šå¾Œ ===
            {
                text: "ãˆã€ã‚ã‚ŠãŒã¨ã†ï¼",
                speaker: "ãªã¿",
                thought: "ï¼ˆå¬‰ã—ã„...ï¼ã§ã‚‚ã€ç”Ÿå¾’ã‹ã‚‰...ã©ã†ã—ã‚ˆã†...ï¼‰",
                portrait: "ğŸ˜³",
                effect: "heart",
                skipIfNoChocolate: true
            },
            {
                text: "ï¼ˆãªã¿å…ˆç”Ÿã¯å°‘ã—å›°ã£ãŸã‚ˆã†ãªã€ã§ã‚‚å¬‰ã—ãã†ãªç¬‘é¡”ã‚’è¦‹ã›ãŸï¼‰",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                skipIfNoChocolate: true
            },
            {
                text: "ï¼ˆå°å£°ï¼‰ãƒã‚¸ã§æ¸¡ã—ãŸã‚ˆ...ï¼",
                speaker: "å‹äººA",
                portrait: "ğŸ‘¦",
                skipIfNoChocolate: true
            },
            {
                text: "ï¼ˆå°å£°ï¼‰ãªã¿å…ˆç”Ÿã€å¬‰ã—ãã†ã ã£ãŸãª...",
                speaker: "å‹äººB",
                portrait: "ğŸ‘¦",
                skipIfNoChocolate: true
            },
            
            // === Phase 7: æ˜¼ä¼‘ã¿ ===
            {
                text: "æ˜¼ä¼‘ã¿ã€‚è·å“¡å®¤ã€‚",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                skipIfNoChocolate: true
            },
            {
                text: "ï¼ˆãƒãƒ§ã‚³ã‚’è¦‹ãªãŒã‚‰ï¼‰ã‚„ã£ãŸãƒ¼...ï¼",
                speaker: "ãªã¿",
                thought: "ï¼ˆå¬‰ã—ã„ãª...ã§ã‚‚ã€å…ˆç”Ÿã¨ç”Ÿå¾’ã ã—...ã©ã†ã—ã‚ˆã†...ï¼‰",
                portrait: "ğŸ˜Š",
                skipIfNoChocolate: true
            },
            {
                text: "ãªã¿å…ˆç”Ÿã€ä½•è¦‹ã¦ãƒ‹ãƒ¤ãƒ‹ãƒ¤ã—ã¦ã‚‹ã®ï¼Ÿ",
                speaker: "å¤§è°·",
                portrait: "ğŸ˜Š",
                skipIfNoChocolate: true
            },
            {
                text: "ãˆã€ãˆã£ã¨...ãªã‚“ã§ã‚‚ãªã„ã§ã™ï¼",
                speaker: "ãªã¿",
                thought: "ï¼ˆè¦‹ã‚‰ã‚ŒãŸ...æ¥ãšã‹ã—ã„...ï¼‰",
                portrait: "ğŸ˜³",
                skipIfNoChocolate: true
            },
            {
                text: "ã‚‚ã—ã‹ã—ã¦ç”Ÿå¾’ã‹ã‚‰ãƒãƒ§ã‚³ã‚‚ã‚‰ã£ãŸã¨ã‹ï¼Ÿè‰¯ã‹ã£ãŸã˜ã‚ƒã‚“ï¼",
                speaker: "å¤§è°·",
                portrait: "ğŸ˜„",
                skipIfNoChocolate: true
            },
            {
                text: "ãã€ãã†ãªã‚“ã§ã™...ãˆã¸ã¸â™ª",
                speaker: "ãªã¿",
                portrait: "ğŸ˜Š",
                skipIfNoChocolate: true
            },
            
            // === Phase 8: æ”¾èª²å¾Œ ===
            {
                text: "æ”¾èª²å¾Œã€‚å»Šä¸‹ã§ãªã¿å…ˆç”Ÿã¨å¶ç„¶ä¼šã£ãŸã€‚",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                skipIfNoChocolate: true
            },
            {
                text: "ã‚ã€playerãã‚“...",
                speaker: "ãªã¿",
                thought: "ï¼ˆãƒ‰ã‚­ãƒ‰ã‚­ã™ã‚‹...ï¼‰",
                portrait: "ğŸ˜Š",
                effect: "heart",
                dynamicName: true,
                skipIfNoChocolate: true
            },
            {
                text: "å…ˆç”Ÿ...ã‚ã®ã€ãƒãƒ§ã‚³...",
                speaker: "player",
                portrait: "ğŸ˜³",
                skipIfNoChocolate: true
            },
            {
                text: "ã‚ã‚ŠãŒã¨ã†...ã™ã”ãå¬‰ã—ã‹ã£ãŸã€‚",
                speaker: "ãªã¿",
                thought: "ï¼ˆã§ã‚‚ã€ç§ã¯å…ˆç”Ÿã§...ï¼‰",
                portrait: "ğŸ˜Š",
                skipIfNoChocolate: true
            },
            {
                text: "ä¿º...å…ˆç”Ÿã®ã“ã¨ãŒ...",
                speaker: "player",
                portrait: "ğŸ˜³",
                skipIfNoChocolate: true,
                choices: [
                    { text: "Aï¼šã€Œå¥½ãã§ã™ï¼ä»˜ãåˆã£ã¦ãã ã•ã„ï¼ã€", affection: 20, courage: -20 },
                    { text: "Bï¼šã€Œå°Šæ•¬ã—ã¦ã¾ã™...ã€ï¼ˆå‘Šç™½ã‚’é¿ã‘ã‚‹ï¼‰", affection: 5, courage: 0 },
                    { text: "Cï¼šã€Œãšã£ã¨è¦‹å®ˆã£ã¦ã¦ã„ã„ã§ã™ã‹ï¼Ÿã€", affection: 12, courage: -10 }
                ]
            },
            
            // === æœ€çµ‚åˆ¤å®š ===
            {
                text: "...",
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                finalJudgment: true
            }
        ];

        // ã‚¯ã‚¤ã‚ºå•é¡Œ
        const quizQuestions = [
            {
                question: "ã€èµ°ã‚Œãƒ¡ãƒ­ã‚¹ã€ã®ä½œè€…ã¯èª°ï¼Ÿ",
                options: ["å¤ªå®°æ²»", "å¤ç›®æ¼±çŸ³", "èŠ¥å·é¾ä¹‹ä»‹", "å®®æ²¢è³¢æ²»"],
                correct: 0
            },
            {
                question: "ãƒ¡ãƒ­ã‚¹ãŒèµ°ã£ãŸç†ç”±ã¯ï¼Ÿ",
                options: ["ãŠé‡‘ã®ãŸã‚", "è¦ªå‹ã‚»ãƒªãƒŒãƒ³ãƒ†ã‚£ã‚¦ã‚¹ã‚’æ•‘ã†ãŸã‚", "ç‹æ§˜ã«ä¼šã†ãŸã‚", "æ•…éƒ·ã«å¸°ã‚‹ãŸã‚"],
                correct: 1
            },
            {
                question: "ãƒ¡ãƒ­ã‚¹ã®è·æ¥­ã¯ï¼Ÿ",
                options: ["æ¼å¸«", "ç¾Šé£¼ã„", "è¾²å¤«", "è·äºº"],
                correct: 1
            }
        ];

        function showNameInput() {
            document.getElementById('title-screen').style.display = 'none';
            document.getElementById('name-input-screen').style.display = 'block';
        }

        function startGame() {
            const nameInput = document.getElementById('player-name-input').value.trim();
            if (nameInput.length === 0) {
                showNotification('åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                return;
            }
            
            gameState.playerName = nameInput;
            document.getElementById('name-input-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            updateStatus();
            showScene();
        }

        function updateStatus() {
            document.getElementById('affection-value').textContent = gameState.affection;
            document.getElementById('courage-value').textContent = gameState.courage;
            
            document.getElementById('affection-bar').style.width = Math.max(0, Math.min(100, gameState.affection)) + '%';
            document.getElementById('courage-bar').style.width = Math.max(0, Math.min(100, gameState.courage)) + '%';
            
            const itemsDiv = document.getElementById('items');
            itemsDiv.innerHTML = '';
            gameState.items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item';
                itemDiv.textContent = item;
                itemsDiv.appendChild(itemDiv);
            });
        }

        function showScene() {
            const scene = allScenarios[gameState.sceneIndex];
            
            if (!scene) {
                // ã‚·ãƒŠãƒªã‚ªçµ‚äº†
                if (!gameState.hasChocolate) {
                    showBadEnding('noChocolate');
                } else {
                    showEnding();
                }
                return;
            }

            // ã‚¹ã‚­ãƒƒãƒ—åˆ¤å®š
            if (scene.skipIfNoChocolate && !gameState.hasChocolate) {
                gameState.sceneIndex++;
                showScene();
                return;
            }

            // æœ€çµ‚åˆ¤å®š
            if (scene.finalJudgment) {
                showEnding();
                return;
            }

            // ã‚¯ã‚¤ã‚º
            if (scene.quiz) {
                showQuiz();
                return;
            }

            // é€šå¸¸ã‚·ãƒ¼ãƒ³è¡¨ç¤º
            displayScene(scene);
        }

        function displayScene(scene) {
            const textContent = document.getElementById('text-content');
            const portraitDiv = document.getElementById('character-portrait');
            const choicesDiv = document.getElementById('choices');
            const effectsDiv = document.getElementById('effects');

            choicesDiv.innerHTML = '';
            choicesDiv.style.display = 'none';
            portraitDiv.textContent = '';
            effectsDiv.innerHTML = '';

            // ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆ
            if (scene.portrait) {
                portraitDiv.textContent = scene.portrait;
            }

            // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            if (scene.effect) {
                const symbols = scene.effect === 'heart' ? ['ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’˜', 'ğŸ’', 'â¤ï¸'] : ['ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ’'];
                for (let i = 0; i < 8; i++) {
                    const symbol = document.createElement('div');
                    symbol.className = 'effect-symbol';
                    symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                    symbol.style.left = Math.random() * 80 + '%';
                    symbol.style.top = Math.random() * 80 + '%';
                    symbol.style.animationDelay = Math.random() * 2 + 's';
                    effectsDiv.appendChild(symbol);
                }
            }

            // ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
            let speaker = scene.speaker;
            if (scene.dynamicName && speaker === 'ãªã¿') {
                // ãªã¿å…ˆç”Ÿã®ã‚»ãƒªãƒ•å†…ã®playerã‚’ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã«ç½®æ›
            }
            if (speaker === 'player') {
                speaker = gameState.playerName;
            }

            const speakerClass = scene.speaker === 'ãªã¿' ? 'character-name' : (scene.speaker === 'player' ? 'character-name player' : 'character-name');
            
            let text = scene.text;
            // playerã‚’å®Ÿéš›ã®åå‰ã«ç½®æ›
            text = text.replace(/player/g, gameState.playerName);
            
            let html = speaker !== 'ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³' ? `<span class="${speakerClass}">${speaker}</span>` : '';
            html += text;
            
            if (scene.thought) {
                html += `<div class="inner-thought">${scene.thought}</div>`;
            }
            
            textContent.innerHTML = html;

            // å¥½æ„Ÿåº¦è¡¨ç¤º
            if (scene.showAffection && gameState.affection > 60) {
                setTimeout(() => {
                    showNotification('ğŸ’– ãªã¿å…ˆç”Ÿã®å¥½æ„Ÿåº¦ãŒä¸ŠãŒã£ãŸï¼');
                }, 500);
            }

            // é¸æŠè‚¢
            if (scene.choices) {
                setTimeout(() => {
                    choicesDiv.style.display = 'block';
                    scene.choices.forEach((choice, index) => {
                        const button = document.createElement('button');
                        button.className = 'choice-button';
                        button.textContent = choice.text;
                        button.onclick = () => makeChoice(choice);
                        choicesDiv.appendChild(button);
                    });
                }, 500);
            } else {
                // æ¬¡ã¸ãƒœã‚¿ãƒ³
                setTimeout(() => {
                    choicesDiv.style.display = 'block';
                    const button = document.createElement('button');
                    button.className = 'continue-button';
                    button.textContent = 'æ¬¡ã¸';
                    button.onclick = () => {
                        gameState.sceneIndex++;
                        showScene();
                    };
                    choicesDiv.appendChild(button);
                }, 500);
            }
        }

        function makeChoice(choice) {
            if (choice.affection) {
                gameState.affection += choice.affection;
                if (choice.affection > 0) {
                    showNotification(`ãªã¿å…ˆç”Ÿã®å¥½æ„Ÿåº¦ +${choice.affection}`);
                }
            }
            
            if (choice.courage) {
                gameState.courage += choice.courage;
            }
            
            if (choice.giveChocolate) {
                gameState.hasChocolate = true;
                gameState.items.push('ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãƒãƒ§ã‚³ğŸ«');
            }
            
            if (choice.retreat) {
                gameState.hasChocolate = false;
            }
            
            updateStatus();
            gameState.sceneIndex++;
            showScene();
        }

        function showQuiz() {
            document.getElementById('choices').style.display = 'none';
            const quizDiv = document.getElementById('quiz-game');
            quizDiv.style.display = 'block';
            
            let currentQuestion = 0;
            
            function displayQuestion() {
                if (currentQuestion >= quizQuestions.length) {
                    quizDiv.style.display = 'none';
                    
                    if (gameState.quizScore === 3) {
                        gameState.affection += 10;
                        showNotification('ğŸ’¯ å…¨å•æ­£è§£ï¼ãªã¿å…ˆç”ŸãŒå–œã‚“ã§ã„ã‚‹ï¼');
                    } else if (gameState.quizScore >= 2) {
                        gameState.affection += 5;
                        showNotification('ğŸ˜Š ã‚ˆãé ‘å¼µã‚Šã¾ã—ãŸï¼');
                    } else {
                        showNotification('ğŸ“š ã‚‚ã†å°‘ã—é ‘å¼µã‚ã†...');
                    }
                    
                    updateStatus();
                    gameState.sceneIndex++;
                    showScene();
                    return;
                }
                
                const q = quizQuestions[currentQuestion];
                quizDiv.innerHTML = `
                    <div class="quiz-question">Q${currentQuestion + 1}. ${q.question}</div>
                `;
                
                q.options.forEach((option, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'quiz-option';
                    btn.textContent = option;
                    btn.onclick = () => {
                        if (index === q.correct) {
                            gameState.quizScore++;
                            showNotification('â­• æ­£è§£ï¼');
                        } else {
                            showNotification('âŒ ä¸æ­£è§£...');
                        }
                        currentQuestion++;
                        setTimeout(displayQuestion, 1000);
                    };
                    quizDiv.appendChild(btn);
                });
            }
            
            displayQuestion();
        }

        function showEnding() {
            document.getElementById('game-screen').style.display = 'none';
            const endingScreen = document.getElementById('ending-screen');
            endingScreen.style.display = 'block';
            
            if (gameState.affection >= 80) {
                showTrueEnding();
            } else if (gameState.affection >= 65) {
                showGoodEnding();
            } else if (gameState.affection >= 45) {
                showNormalEnding();
            } else {
                showBadEnding('lowAffection');
            }
        }

        function showTrueEnding() {
            const endingScreen = document.getElementById('ending-screen');
            endingScreen.className = 'true-end';
            endingScreen.innerHTML = `
                <div class="character-portrait">ğŸ°ğŸ’•</div>
                <h2>ğŸ’ True Love Endï¼šç¦æ–­ã®æ‹ã€æˆå°± ğŸ’</h2>
                <p><strong>${gameState.playerName}ï¼š</strong>ã€Œå¥½ãã§ã™ï¼ä»˜ãåˆã£ã¦ãã ã•ã„ï¼ã€</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œ...${gameState.playerName}ãã‚“ã€</p>
                <p>ãªã¿å…ˆç”Ÿã¯å›°ã£ãŸé¡”ã‚’ã—ãªãŒã‚‰ã‚‚ã€å¾®ç¬‘ã‚“ã ã€‚</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œç§ã‚‚...å®Ÿã¯ã€${gameState.playerName}ãã‚“ã®ã“ã¨...æ°—ã«ãªã£ã¦ãŸã€</p>
                <p><strong>${gameState.playerName}ï¼š</strong>ã€Œæœ¬å½“ã§ã™ã‹...ï¼ã€</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œã§ã‚‚ã€ç§ã¯å…ˆç”Ÿã§ã€${gameState.playerName}ãã‚“ã¯ç”Ÿå¾’ã ã‹ã‚‰...å’æ¥­ã™ã‚‹ã¾ã§å¾…ã£ã¦ãã‚Œã‚‹ï¼Ÿã€</p>
                <p><strong>${gameState.playerName}ï¼š</strong>ã€Œã‚‚ã¡ã‚ã‚“ã§ã™ï¼ã€</p>
                <p style="margin-top: 30px;">1ãƒ¶æœˆå¾Œã€é’ç¨œä¸­å­¦æ ¡ã®å’æ¥­å¼ã€‚</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œå’æ¥­ãŠã‚ã§ã¨ã†ã€‚ã“ã‚Œã§ã€ã‚‚ã†å…ˆç”Ÿã¨ç”Ÿå¾’ã˜ã‚ƒãªã„ã­ã€</p>
                <p>äºŒäººã¯æ‰‹ã‚’ç¹‹ãã€æ–°ã—ã„äººç”Ÿã‚’æ­©ã¿å§‹ã‚ãŸã€‚</p>
                <p style="font-size: 48px; margin: 30px 0;">ğŸ’• HAPPY END ğŸ’•</p>
                <p style="font-size: 14px; color: #666;">
                æœ€çµ‚ã‚¹ã‚³ã‚¢<br>
                å¥½æ„Ÿåº¦: ${gameState.affection} / å‹‡æ°—: ${gameState.courage}<br>
                ã‚¯ã‚¤ã‚ºæ­£è§£æ•°: ${gameState.quizScore}/3
                </p>
                <button class="restart-button" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
            `;
        }

        function showGoodEnding() {
            const endingScreen = document.getElementById('ending-screen');
            endingScreen.className = 'good-end';
            endingScreen.innerHTML = `
                <div class="character-portrait">ğŸ°ğŸ˜Š</div>
                <h2>ğŸ’— Good Endï¼šå„ªã—ã„å…ˆç”Ÿ ğŸ’—</h2>
                <p><strong>${gameState.playerName}ï¼š</strong>ã€Œå¥½ãã§ã™ï¼ã€</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œ...ã‚ã‚ŠãŒã¨ã†ã€‚å¬‰ã—ã„ã‚ˆã€</p>
                <p>ãªã¿å…ˆç”Ÿã¯å„ªã—ãå¾®ç¬‘ã‚“ã ã€‚</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œã§ã‚‚ã€ç§ã¯å…ˆç”Ÿã ã‹ã‚‰...æ‹äººã«ã¯ãªã‚Œãªã„ã®ã€‚ã”ã‚ã‚“ã­ã€</p>
                <p><strong>${gameState.playerName}ï¼š</strong>ã€Œ...ãã†ã§ã™ã‚ˆã­ã€</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œã§ã‚‚ã€${gameState.playerName}ãã‚“ã®æ°—æŒã¡ã¯å¬‰ã—ã‹ã£ãŸã€‚å¤§åˆ‡ãªç”Ÿå¾’ã ã‚ˆã€</p>
                <p>å’æ¥­å¾Œã‚‚ã€ãªã¿å…ˆç”Ÿã¨ã¯è‰¯ã„é–¢ä¿‚ãŒç¶šã„ãŸã€‚<br>
                æ™‚ã€…é’ç¨œä¸­å­¦æ ¡ã«éŠã³ã«è¡Œãã¨ã€ãªã¿å…ˆç”Ÿã¯å¤‰ã‚ã‚‰ãšå„ªã—ãè¿ãˆã¦ãã‚Œã‚‹ã€‚</p>
                <p style="font-size: 14px; color: #666; margin-top: 30px;">
                æœ€çµ‚ã‚¹ã‚³ã‚¢<br>
                å¥½æ„Ÿåº¦: ${gameState.affection} / å‹‡æ°—: ${gameState.courage}<br>
                â€»å¥½æ„Ÿåº¦80ä»¥ä¸Šã§True Endã«åˆ°é”ã§ãã¾ã™
                </p>
                <button class="restart-button" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
            `;
        }

        function showNormalEnding() {
            const endingScreen = document.getElementById('ending-screen');
            endingScreen.className = 'normal-end';
            endingScreen.innerHTML = `
                <div class="character-portrait">ğŸ°</div>
                <h2>Normal Endï¼šã»ã‚è‹¦ã„ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³</h2>
                <p><strong>${gameState.playerName}ï¼š</strong>ã€Œå¥½ãã§ã™...ã€</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œ...ã”ã‚ã‚“ã­ã€‚æ°—æŒã¡ã¯å¬‰ã—ã„ã‘ã©ã€å…ˆç”Ÿã¨ç”Ÿå¾’ã ã‹ã‚‰ã€</p>
                <p>ãªã¿å…ˆç”Ÿã¯ç”³ã—è¨³ãªã•ãã†ã«å¾®ç¬‘ã‚“ã ã€‚</p>
                <p><strong>ãªã¿ï¼š</strong>ã€Œã§ã‚‚ã€ãƒãƒ§ã‚³ã¯ã‚ã‚ŠãŒã¨ã†ã€‚å¤§åˆ‡ã«ã™ã‚‹ã­ã€</p>
                <p>ãã®å¾Œã€ãªã¿å…ˆç”Ÿã¨ã®é–¢ä¿‚ã¯å¤‰ã‚ã‚‰ãªã‹ã£ãŸã€‚<br>
                é’ç¨œä¸­å­¦æ ¡ã®å’æ¥­ã¾ã§ã€æ™®é€šã®å…ˆç”Ÿã¨ç”Ÿå¾’ã¨ã—ã¦éã”ã—ãŸã€‚</p>
                <p style="font-size: 14px; color: #666; margin-top: 30px;">
                æœ€çµ‚ã‚¹ã‚³ã‚¢<br>
                å¥½æ„Ÿåº¦: ${gameState.affection} / å‹‡æ°—: ${gameState.courage}<br>
                â€»å¥½æ„Ÿåº¦65ä»¥ä¸Šã§Good Endã«åˆ°é”ã§ãã¾ã™
                </p>
                <button class="restart-button" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
            `;
        }

        function showBadEnding(type) {
            const endingScreen = document.getElementById('ending-screen');
            endingScreen.style.display = 'block';
            endingScreen.className = 'bad-end';
            
            if (type === 'noChocolate') {
                endingScreen.innerHTML = `
                    <div class="character-portrait">ğŸ˜</div>
                    <h2>Bad Endï¼šæ¸¡ã›ãªã‹ã£ãŸãƒãƒ§ã‚³</h2>
                    <p>çµå±€ã€å‹‡æ°—ãŒå‡ºã›ãšã«ãƒãƒ§ã‚³ã‚’æ¸¡ã›ãªã‹ã£ãŸã€‚</p>
                    <p>ãã®æ—¥ã®æ”¾èª²å¾Œã€ãªã¿å…ˆç”Ÿã¯ä»–ã®ç”Ÿå¾’ãŸã¡ã‹ã‚‰ã‚‚ã‚‰ã£ãŸãƒãƒ§ã‚³ã‚’å¬‰ã—ãã†ã«è¦‹ã¦ã„ãŸã€‚</p>
                    <p><strong>${gameState.playerName}ï¼š</strong>ï¼ˆé ãã‹ã‚‰è¦‹ã¦ã„ã‚‹ï¼‰...æ¸¡ã›ã°ã‚ˆã‹ã£ãŸ</p>
                    <p>é’ç¨œä¸­å­¦æ ¡ã®å’æ¥­ã¾ã§ã€ã“ã®å¾Œæ‚”ã¯æ¶ˆãˆã‚‹ã“ã¨ã¯ãªã‹ã£ãŸ...</p>
                    <p style="font-size: 14px; color: #666; margin-top: 30px;">
                    æœ€çµ‚ã‚¹ã‚³ã‚¢<br>
                    å¥½æ„Ÿåº¦: ${gameState.affection} / å‹‡æ°—: ${gameState.courage}<br>
                    â€»ãƒãƒ§ã‚³ã‚’æ¸¡ã•ãªã‹ã£ãŸãŸã‚ã€Bad Endã«ãªã‚Šã¾ã—ãŸ
                    </p>
                    <button class="restart-button" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
                `;
            } else {
                endingScreen.innerHTML = `
                    <div class="character-portrait">ğŸ˜°</div>
                    <h2>Bad Endï¼šå›°æƒ‘ã®å‘Šç™½</h2>
                    <p><strong>${gameState.playerName}ï¼š</strong>ã€Œå¥½ãã§ã™ï¼ã€</p>
                    <p><strong>ãªã¿ï¼š</strong>ã€Œãˆ...ãˆãˆã£ï¼ï¼Ÿã€</p>
                    <p>ãªã¿å…ˆç”Ÿã¯æ˜ã‚‰ã‹ã«å›°æƒ‘ã—ãŸè¡¨æƒ…ã‚’è¦‹ã›ãŸã€‚</p>
                    <p><strong>ãªã¿ï¼š</strong>ã€Œã”ã€ã”ã‚ã‚“ã­...ãã†ã„ã†ã¤ã‚‚ã‚Šã˜ã‚ƒãªãã¦...ã€</p>
                    <p>ãã®å¾Œã€ãªã¿å…ˆç”Ÿã¨ã¯ãã“ã¡ãªã„é–¢ä¿‚ãŒç¶šã„ãŸã€‚<br>
                    é’ç¨œä¸­å­¦æ ¡ã®å’æ¥­ã¾ã§ã€æ°—ã¾ãšã„æ€ã„ã‚’ã™ã‚‹ã“ã¨ã«ãªã£ãŸ...</p>
                    <p style="font-size: 14px; color: #666; margin-top: 30px;">
                    æœ€çµ‚ã‚¹ã‚³ã‚¢<br>
                    å¥½æ„Ÿåº¦: ${gameState.affection} / å‹‡æ°—: ${gameState.courage}<br>
                    â€»å¥½æ„Ÿåº¦ãŒä½ã™ãã¾ã—ãŸã€‚ã‚‚ã£ã¨è‰¯ã„é¸æŠè‚¢ã‚’é¸ã¼ã†ï¼
                    </p>
                    <button class="restart-button" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
                `;
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }
    </script>
</body>
</html>